<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Controle de Estoque e Vendas</title>
    <link rel="stylesheet" href="Style.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="Script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark p-2">
        <span class="navbar-brand">üì¶ Controle de Estoque GIGASTRORE</span>
        <button class="btn btn-light theme-toggle" onclick="toggleTheme()">üåì</button>
    </nav>

    <div class="container-fluid mt-3 px-3 px-md-5">
        <ul class="nav nav-tabs mb-3" id="tabMenu">
            <li class="nav-item"><a class="nav-link active" onclick="showTab('produtos')">Produtos</a></li>
            <li class="nav-item"><a class="nav-link" onclick="showTab('estoque')">Estoque</a></li>
            <li class="nav-item"><a class="nav-link" onclick="showTab('ajustar')">Ajustar Estoque</a></li>
            <li class="nav-item"><a class="nav-link" onclick="showTab('vendas')">Vendas</a></li>
            <li class="nav-item"><a class="nav-link" onclick="showTab('relatorios')">Relat√≥rios</a></li>
        </ul>

        <!-- PRODUTOS -->
        <div id="produtos" class="tab-content">
            <h4>Cadastrar Produto</h4>
            <div class="row g-2">
                <div class="col-md-6"><input id="nome" class="form-control" placeholder="Nome do produto" /></div>
                <div class="col-md-6"><input id="codigo" class="form-control" placeholder="C√≥digo ou ID" /></div>
                <div class="col-md-4"><input id="preco" class="form-control" type="number" step="0.01"
                        placeholder="Pre√ßo" /></div>
                <div class="col-md-4"><input id="quantidade" class="form-control" type="number"
                        placeholder="Quantidade" /></div>
                <div class="col-md-4"><input id="estoqueMinimo" class="form-control" type="number"
                        placeholder="Estoque m√≠nimo" /></div>
                <div class="col-md-6"><select id="marca" class="form-control">
                        <option value="Avon">Avon</option>
                        <option value="Natura">Natura</option>
                        <option value="Eudora">Eudora</option>
                        <option value="O Botic√°rio">OBotic√°rio</option>
                        <option value="Demillus">Demillus</option>
                        <option value="Tupperware">Tupperware</option>
                    </select></div>
                <div class="col-md-6"><input id="validade" class="form-control" type="date"
                        placeholder="Data de validade (opcional)" /></div>
                <div class="col-md-12"><textarea id="obsProduto" class="form-control"
                        placeholder="Observa√ß√µes"></textarea></div>
                <div class="col-md-12"><button class="btn btn-primary w-100" onclick="adicionarProduto()">Salvar
                        Produto</button></div>
            </div>
        </div>

        <!-- ESTOQUE -->
        <div id="estoque" class="tab-content d-none">
            <h4>Estoque</h4>
            <div class="row mb-3">
                <div class="col-md-6">
                    <input id="filtroBusca" class="form-control" placeholder="Buscar por nome ou c√≥digo"
                        oninput="carregarProdutos()" />
                </div>
                <div class="col-md-4">
                    <select id="filtroMarca" class="form-control" onchange="carregarProdutos()">
                        <option value="">Todas as marcas</option>
                        <option>Avon</option>
                        <option>Natura</option>
                        <option>Eudora</option>
                        <option>OBotic√°rio</option>
                        <option>Demillus</option>
                        <option>Tupperware</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-info w-100" onclick="filtrarPorValidade()">
                        <i class="bi bi-filter"></i> Filtrar Validade
                    </button>
                </div>
            </div>
            <div class="row" id="tabelaEstoque"></div>
        </div>

        <!-- AJUSTAR -->
        <div id="ajustar" class="tab-content d-none">
            <h4>Ajustar Quantidade e Pre√ßo</h4>
            <div class="row g-2">
                <div class="col-md-12"><input id="ajusteBusca" class="form-control" placeholder="Buscar produto..."
                        oninput="buscarProdutoAjuste()" /></div>
                <div class="col-md-12"><select id="produtoAjuste" class="form-control"
                        onchange="preencherDadosProduto()"></select></div>
                <div class="col-md-6"><input id="quantidadeNova" class="form-control" type="number"
                        placeholder="Nova quantidade" /></div>
                <div class="col-md-6"><input id="precoNovo" class="form-control" type="number" step="0.01"
                        placeholder="Novo pre√ßo (opcional)" /></div>
                <div class="col-md-12"><button class="btn btn-primary w-100" onclick="ajustarEstoque()">Salvar
                        ajustes</button></div>
            </div>
        </div>

        <!-- VENDAS -->
        <div id="vendas" class="tab-content d-none">
            <h4>Registrar Venda</h4>
            <div class="row g-2">
                <div class="col-md-12"><input id="buscaVenda" class="form-control" placeholder="Buscar produto..."
                        oninput="buscarProdutoVenda()" /></div>
                <div class="col-md-12"><select id="produtoVenda" class="form-control"></select></div>
                <div class="col-md-6"><input id="quantidadeVenda" class="form-control" type="number" value="1"
                        placeholder="Quantidade" /></div>
                <div class="col-md-6"><input id="cliente" class="form-control" placeholder="Nome do cliente" /></div>
                <div class="col-md-6"><select id="formaPagamento" class="form-control">
                        <option value="PIX">PIX</option>
                        <option value="Dinheiro">Dinheiro</option>
                        <option value="Cart√£o">Cart√£o</option>
                    </select></div>
                <div class="col-md-6"><input id="desconto" class="form-control"
                        placeholder="Desconto (ex: 10 ou 10%)" /></div>
                <div class="col-md-12"><textarea id="obsVenda" class="form-control"
                        placeholder="Observa√ß√µes"></textarea></div>
                <div class="col-md-12"><button class="btn btn-success w-100" onclick="registrarVenda()">Finalizar
                        Venda</button></div>
            </div>
        </div>

        <!-- RELAT√ìRIOS SIMPLIFICADO -->
        <div id="relatorios" class="tab-content d-none">
            <h4>Hist√≥rico de Vendas</h4>
            <div class="row mb-3">
                <div class="col-md-4">
                    <input type="date" id="dataInicio" class="form-control" onchange="carregarVendas()">
                </div>
                <div class="col-md-4">
                    <input type="date" id="dataFim" class="form-control" onchange="carregarVendas()">
                </div>
                <div class="col-md-4">
                    <input type="text" id="filtroDescricao" class="form-control" placeholder="Filtrar por descri√ß√£o"
                        oninput="carregarVendas()">
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Produto</th>
                            <th>Quantidade</th>
                            <th>Valor</th>
                            <th>Cliente</th>
                            <th>Pagamento</th>
                            <th>Observa√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="listaVendas">
                        <!-- As vendas ser√£o carregadas aqui -->
                    </tbody>
                </table>
            </div>
            <div class="mt-3">
                <h5>Total: R$ <span id="totalVendas">0,00</span></h5>
                <button class="btn btn-danger w-100 mt-2" onclick="confirmarApagarVendas()">
                    üóëÔ∏è Apagar Todas as Vendas
                </button>
            </div>
        </div>
    </div>
</body>

</html>